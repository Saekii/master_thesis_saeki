\documentclass[12pt]{jreport}

\input{jdummy.def}
%卒論用スタイルファイル
\usepackage{jgraduate2003_sjis}
%索引作成用
\usepackage{makeidx}
\usepackage{graphicx}
\usepackage{ascmac}
\usepackage{enumerate}

% 前設定
\date{平成27年2月}
\title{\fontsize{15.5pt}{25pt}\selectfont WLANとZigBeeの共存に向けた\\AA（Access Point-Assisted） CTS-Blockingに関する研究}
\author{佐伯 良光}
\university{九州大学大学院}
\department{システム情報科学府}
\course{修士課程}
\major{情報知能工学専攻}
\subcourse{社会情報システム工学コース}

\begin{document}
%表紙
\maketitle


\chapter{AA-CTS Blocking}\label{implement}%==============================================
本章では，提案するAA CTS-Blockingについて説明する．
最初にシステムの概要を述べ，次にシステムの構成，設計について述べる．\\

\section{システム概要}

本システムでは，周辺にあるWLAN APからCTSフレームを送信させてCTS-Blockingを実現する．
これにより，WLAN通信の一時的ブロックによる効率的なZigBee通信の実現を目指す．
また，RTSを送信するAPの選択については，APから取得できる情報を基に最適なAP選択アルゴリズムを考慮する．

図\ref{fig:3_01}に，AA CTS-Blockingシステムの概要を示す．
本システムは，環境内に配置された複数のZigBeeノード及びZigBee基地局，制御PCから構成される．
ZigBee基地局と制御PCは有線接続されている．

制御PCでは，周囲に存在するWLAN APのビーコンフレームを受信し，チャネル，受信信号強度（RSSI）を収集する．
ZigBeeの通信を開始する場合，周囲のAPの1つを選択して制御PCからRTSフレームを送信する．
選択されたAPはRTSフレームを受信すると周囲のWLAN端末に対してCTSフレームを送信する．
制御PCはAPからのCTSフレームを受信するとZigBee基地局を用いてZigBeeノードとの通信を開始する．
WLAN APは，そのAPが提供するWLANネットワークに参加していない端末からのRTSフレームに対しても
CTSフレームを返答するため，制御PCでは任意のAPを選択することができる．

\section{システム構成}

ここでは，システムを構成するハードウェアについて説明する．
システムはZigBeeノード，ZigBee基地局及び制御PCからなる．
以下，詳細を述べる．

\subsection{ZigBeeノード}

本システムにおけるZigBeeノードは，環境内に配置され，データをZigBee基地局へ送信する．
データの信頼性の観点から，各ノードのフレーム送信を確実に成功させる仕組みが必要である．
図\ref{fig:3_02}に示すように，各ノードに送信を待機させるスロット時間を設定し，フレーム衝突の回避を図ったり，
衝突した場合に備えてタイムアウトを設定しデータを再送する手法などがある．

本システムにおけるZigBeeノードは日本国内で入手しやすく，センサノードとして一般的なCrossbow社のMICAzを使用した．
MICAzは無線機能，CPU，メモリ等を有したノード部分と各種センサを搭載したセンサ基板部分から構成されるセンサノードである．
安定動作電圧は3.3V，消費電流は通信時60mA，スリープ時20μAである．
図\ref{fig:3_03}に実際に使用する端末を示す．(Crossbow, MICAz MPR2600J)
MPR2600J(RF周波数帯2405MHz～2480MHz)はChipcon CC2420，IEEE 802.15.4 準拠，Atmega128L マイクロコントローラと
統合されたZigBee対応無線周波数トランシーバを使用しており，最大約50mの通信を行うことができる．
電源は単三乾電池2本から供給可能である．
端の一方にはON/OFFスイッチが，もう一方にはアンテナが付属している．

\subsection{ZigBee基地局}

本システムにおけるZigBee基地局は，周囲のZigBeeノードからデータを収集し出力する．
基地局は同一の周波数帯域内で2つ以上の複数の通信を行う多元接続方式の採用が必要である．
そこでデータ収集として，図\ref{fig:3_04}に示すFDMA方式，TDMA方式，CDMA方式から最適な方式を選択する．
データの出力については，基地局はPCに有線接続されているため，収集したデータをPCのコンソールに行うことが可能である．

図\ref{fig:3_05}に実際に基地局として使用するための接続基板を示す．(Crossbow, MIB520)
MIB520 は，MICA 系のMOTE にUSB 接続し，シリアル通信及びシステムプログラミングを可能とする．
I/OインターフェースとしてUSB Aタイプ（オス）を備え，電源はUSB バスを通じてPC から供給する．
MIB520 はオンボードでISP（in-system programming）に対応したAtmega16L – U14 を搭載しているため
MOTE のプログラミングが可能である．
コードはUSB からISP を通してダウンロードされる．
ISP はMOTE にコードプログラミングもする．
但し，MOTE にプログラムするにはホストPC にTinyOS がインストールされていることが必要条件である．
MICAz をMIB520 に装着してUISP プログラミングが行われる．
また，出力コンソールとして3色（赤，緑，黄）のLEDを利用できる．
メス−メスUSB A-Aコネクタ（オス - メス）を用いて制御PCと接続を行った．

\subsection{制御PC}

本システムにおける制御PCは，周囲のWLAN APに向けてRTSフレームを送信し，
返ってきたCTSフレームの受信をトリガーとして有線接続されたZigBee基地局へ信号を送信する．
APの選択アルゴリズムは，APから取得できる情報のみを基準にする必要がある．
RTSフレームは通常，直接送信はできないため，擬似フレームとした．

図\ref{fig:3_06}に実際に使用するPCを示す．(TOSHIBA, Dynabook UX/28LWHEM)
MIB520のI/OインターフェースはUSB Aタイプ（オス）であるため，
制御PCはメス−メスUSB A-Aコネクタ（オス - メス）を用いることでZigBee基地局と接続できる．

%\begin{figure}[bt]
%\begin{center}
%\includegraphics[width=0.8\hsize]{figure/terminal.eps}
%\caption{端末}
%\label{fig:terminal}
%\end{center}
%\end{figure}

\end{document}

%付録
%\appendix

%索引
%printindex

%項
%\subsection{}
%目
%\subsubsection{}
%段落
%\paragraph{}
%小段落
%\subparagraph{}

%In-System Programming (インシステム プログラミング、ISP) とは、ある種のPLDやマイクロコントローラやその他プログラム可能な電子部品において、事前にプログラムを書き込んでからシステムに組み込むのではなく、組み込み済みの状態でプログラムを書き込むことである。
%この機能の主な利点は、システムの組み立て前に書き込み段階を別途設ける必要が無く、電子機器の製造者がプログラムの書き込みとテストを一つの製造工程で行なえることである。書き込み済みチップをそのメーカーや代理店から購入する代わりに、製造者がシステムの製造ラインでチップへの書き込みができるので、生産期間の途中でもコードや設計の変更が可能となる。
%一般的に ISP をサポートしたチップは、書き込みに必要なすべての電圧をシステムの通常の供給電圧から作り出す回路を内部に持っており、ライタとはシリアルプロトコルで通信する。多くの PLD では、自動化したテスト手順との統合が簡単になるように、ISP に JTAG プロトコルの一種を使っている。それ以外のデバイスでは、通常は独自のプロトコルや古い規格で定義されたプロトコルを使う。ある程度の規模のグルーロジックが必要となるような複雑なシステムでは、JTAG に対応していないフラッシュメモリやマイクロコントローラのようなデバイス用に、JTAG 制御の書き込みサブシステムを実装した設計が行なわれることもある。そのようにすれば、書き込みとテストのすべての手順を一つのプロトコルの制御下で行なえるからである。



